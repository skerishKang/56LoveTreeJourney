// main.jsx
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App";
import "./styles.css";

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App />);

// App.jsx
import React from "react";
import Tree from "./Tree";

function App() {
  return (
    <div className="app">
      <h1>ğŸ’˜ Love Tree</h1>
      <Tree />
    </div>
  );
}

export default App;

// Tree.jsx
import React, { useState } from "react";
import YouTube from "react-youtube";
import { v4 as uuidv4 } from "uuid";

function Tree() {
  const [nodes, setNodes] = useState([]);
  const [url, setUrl] = useState("");
  const [start, setStart] = useState("");
  const [comment, setComment] = useState("");
  const [emotion, setEmotion] = useState("ê·€ì—¬ì›€");

  const addNode = () => {
    const videoId = url.split("v=")[1]?.substring(0, 11);
    if (!videoId) return alert("URL ì˜¤ë¥˜");

    setNodes([
      ...nodes,
      {
        id: uuidv4(),
        videoId,
        start,
        comment,
        emotion,
        color: emotion === "ê·€ì—¬ì›€" ? "#FFD700" : emotion === "ì„¹ì‹œí•¨" ? "#FF4B5C" : "#6AC1FF"
      }
    ]);
  };

  return (
    <div className="tree">
      <input placeholder="YouTube URL" onChange={(e) => setUrl(e.target.value)} />
      <input placeholder="ì‹œì‘ ì‹œê°„ (ì´ˆ)" onChange={(e) => setStart(e.target.value)} />
      <input placeholder="ê°ìƒí‰" onChange={(e) => setComment(e.target.value)} />
      <select onChange={(e) => setEmotion(e.target.value)}>
        <option>ê·€ì—¬ì›€</option>
        <option>ì„¹ì‹œí•¨</option>
        <option>ê°ë™</option>
      </select>
      <button onClick={addNode}>ì¶”ê°€</button>

      <div className="nodes">
        {nodes.map((n) => (
          <div key={n.id} className="node" style={{ borderColor: n.color }}>
            <YouTube videoId={n.videoId} opts={{ playerVars: { start: Number(n.start) } }} />
            <p>{n.comment}</p>
            <span>{n.emotion}</span>
          </div>
        ))}
      </div>
    </div>
  );
}

export default Tree;

// styles.css
body {
  font-family: sans-serif;
  text-align: center;
  background: #fff0f6;
}
.app h1 {
  color: #e91e63;
}
.tree input,
.tree select {
  margin: 5px;
  padding: 5px;
  border-radius: 8px;
}
.tree button {
  margin: 5px;
  padding: 5px 10px;
  background-color: #ff69b4;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}
.nodes {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 20px;
}
.node {
  margin: 10px;
  border: 5px solid #ffd700;
  border-radius: 12px;
  padding: 8px;
  background: white;
  width: 220px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
}
